function coordinatorEditEnable(){
  var x = document.getElementById("editEnable");
  if (x.style.display === "block") {
    x.style.display = "none";
  } else {
    x.style.display = "block";
  }

  var fname = document. getElementById("editcofirst_name"). disabled;
  var lname = document. getElementById("editcolast_name"). disabled;
  var number = document. getElementById("editconumber"). disabled;
  var email = document. getElementById("editcoemail"). disabled;
  var age = document. getElementById("editcoage"). disabled;
  var male = document. getElementById("male"). disabled;
  var female = document. getElementById("female"). disabled;
  var others = document. getElementById("other"). disabled;

  if (fname) {
  document. getElementById("editcofirst_name"). disabled = false;
  }
  else {
  document. getElementById("editcofirst_name"). disabled = true;
  }

  if (lname) {
  document. getElementById("editcolast_name"). disabled = false;
  }
  else {
  document. getElementById("editcolast_name"). disabled = true;
  }

  if (number) {
  document. getElementById("editconumber"). disabled = false;
  }
  else {
  document. getElementById("editconumber"). disabled = true;
  }

  if (email) {
  document. getElementById("editcoemail"). disabled = false;
  }
  else {
  document. getElementById("editcoemail"). disabled = true;
  }

  if (age) {
  document. getElementById("editcoage"). disabled = false;
  }
  else {
  document. getElementById("editcoage"). disabled = true;
  }
  if (male) {
    document. getElementById("male"). disabled = false;
    }
    else {
    document. getElementById("male"). disabled = true;
    }
    if (female) {
    document. getElementById("female"). disabled = false;
    }
    else {
    document. getElementById("female"). disabled = true;
    }
    if (others) {
      document. getElementById("other"). disabled = false;
      }
      else {
      document. getElementById("other"). disabled = true;
      }
}

function investigatorEditEnable(){
var x = document.getElementById("editinEnable");
if (x.style.display === "block") {
  x.style.display = "none";
} else {
  x.style.display = "block";
}
var fname = document.getElementById("editinfirst_name"). disabled;
var lname = document.getElementById("editinlast_name"). disabled;
var number = document.getElementById("editinnumber"). disabled;
var email = document.getElementById("editinemail"). disabled;
var age = document.getElementById("editinage"). disabled;
var male = document.getElementById("male"). disabled;
var female = document.getElementById("female"). disabled;
var others = document.getElementById("other"). disabled;

if (fname) {
document.getElementById("editinfirst_name").disabled = false;
}
else {
document.getElementById("editinfirst_name").disabled = true;
}


if (lname) {
document.getElementById("editinlast_name").disabled = false;
}
else {
document.getElementById("editinlast_name").disabled = true;
}

if (number) {
document.getElementById("editinnumber").disabled = false;
}
else {
document.getElementById("editinnumber").disabled = true;
}

if (email) {
document.getElementById("editinemail").disabled = false;
}
else {
document.getElementById("editinemail").disabled = true;
}

if (age) {
document.getElementById("editinage").disabled = false;
}
else {
document.getElementById("editinage").disabled = true;
}
if (male) {
  document. getElementById("male"). disabled = false;
  }
  else {
  document. getElementById("male"). disabled = true;
  }
  if (female) {
  document. getElementById("female"). disabled = false;
  }
  else {
  document. getElementById("female"). disabled = true;
  }
  if (others) {
    document. getElementById("other"). disabled = false;
    }
    else {
    document. getElementById("other"). disabled = true;
    }

}



function researcherEditEnable(){
var x = document.getElementById("editreEnable");
if (x.style.display === "block") {
x.style.display = "none";
} else {
x.style.display = "block";
}
var fname = document. getElementById("editrefirst_name"). disabled;
var lname = document. getElementById("editrelast_name"). disabled;
var number = document. getElementById("editrenumber"). disabled;
var email = document. getElementById("editreemail"). disabled;
var age = document. getElementById("editreage"). disabled;
// var gender = document. getElementById("editregender"). disabled;
var male = document. getElementById("male"). disabled;
var female = document. getElementById("female"). disabled;
var others = document. getElementById("other"). disabled;

if (fname) {
document.getElementById("editrefirst_name").disabled = false;
}
else {
document.getElementById("editrefirst_name").disabled = true;
}


if (lname) {
document.getElementById("editrelast_name").disabled = false;
}
else {
document.getElementById("editrelast_name").disabled = true;
}

if (number) {
document.getElementById("editrenumber").disabled = false;
}
else {
document.getElementById("editrenumber").disabled = true;
}

if (email) {
document.getElementById("editreemail").disabled = false;
}
else {
document.getElementById("editreemail").disabled = true;
}

if (age) {
document.getElementById("editreage").disabled = false;
}
else {
document.getElementById("editreage").disabled = true;
}

if (male) {
document.getElementById("male").disabled = false;
}
else {
document.getElementById("male").disabled = true;
}
if (female) {
document.getElementById("female").disabled = false;
}
else {
document.getElementById("female").disabled = true;
}
if (others) {
document.getElementById("other").disabled = false;
}
else {
document.getElementById("other").disabled = true;
}

}


function enableEditList(name){
var btnId = name
var a = document.getElementById("editB" + name).getAttribute('value');
var x = document.getElementById("side_edit" + name);
var y = document.getElementById("full_edit" + name);
var z = document.getElementById("loc-edit-dis" + name);
if(name == a){
if (x.style.display === "block") {
x.style.display = "none";
y.style.display = "block";
z.style.display = "none";
} else {
x.style.display = "block";
y.style.display = "none";
z.style.display = "block"
}
}
else if (name != a) {
x.style.display = "none";
y.style.display = "none";
z.style.display = "none";
}


}

function addMoreSurvey() {
  $('.subDiv').parent('div.parentDiv').append($('.parentDiv').children('div:first').html());
}

function addMoreQuesOptions() {
  $('.echildQues').parent('div.eparentQues').append($('.eparentQues').children('div:first').html());
  $('.kchildQues').parent('div.kparentQues').append($('.kparentQues').children('div:first').html());

}

function addMoreMapping(){

  $('.childWeeks').parent('div.parentWeeks').append($('.parentWeeks').children('div:first').html());
  week_count += 1
  document.getElementById("week_no").innerHTML ="week "+ week_count

  var mod1 = document.getElementById("mod1")
  var mod = document.getElementById("mod")
  var div_week = document.getElementById("div_week")
  var week_no = document.getElementById("week_no")
  // if (mod.style.display === "none") {
  //   mod.style.display = "block";
  // } 

  // var d = document.getElementById('div_week');
  // d.parentNode.appendChild(d);
  if (mod.style.display === "none") {
    mod.style.display = "block";
    div_week.style.visibility = "visible"
    week_no.style.display = "block"
  } 


  // if (week_no.style.display === "none") {
  //   week_no.style.display = "block";
  // } 
  // if(div_week.style.display == "none"){
  //   div_week.style.display = "block";

  // }

  // const firstList = document.getElementById('#weekss');
  // // take the first child element
  // const everest = firstList.firstElementChild;
  // // get the second list
  // const secondList = document.getElementById('#div_week');
  // // append the everest to the second list
  // secondList.appendChild(everest)

}

function viewQuesOptions1() {
var single_q = document.getElementById("single_q").value;
var parentQues = document.getElementById("parent_all_ques")
// var multiple_q = document.getElementById("multiple_q").value;
// var text_q = document.getElementById("text_q").value;
// // var date_q = document.getElementById("date_q").value;
// // var numeric_q = document.getElementById("numeric_q").value;
var parentQues = document.getElementById("parent_all_ques")
var value 
if (single_q == "single_select") {
  parentQues.style.display = "block";
} 
// if("multiple"){
//   parentQues.style.display = "block";
// }
// if("text"){
//   alert("aaa")
//   parentQues.style.display = "none";
// }
// if(value == "text"){
//   parentQues.style.display = "none";
// }
// if(value == "text"){
//   parentQues.style.display = "none";
// }


}

function viewQuesOptions2(){
var multiple_q = document.getElementById("multiple_q").value;
var parentQues = document.getElementById("parent_all_ques")

if (multiple_q == "multi_select" ) {
  parentQues.style.display = "block";
} 

}

function viewQuesOptions3(){

var text_q = document.getElementById("text_q").value;
var parentQues = document.getElementById("parent_all_ques")

if (text_q == "text") {
  parentQues.style.display = "none";
} 

}

function viewQuesOptions4(){

var date_q = document.getElementById("date_q").value;
var parentQues = document.getElementById("parent_all_ques")

if (date_q == "date" ) {
  parentQues.style.display = "none";
} 

}

function viewQuesOptions5(){

var numeric_q = document.getElementById("numeric_q").value;
var parentQues = document.getElementById("parent_all_ques")

if (numeric_q == "numeric" ) {
  parentQues.style.display = "none";
} 

}


// $(function() {
//   $( "#dob" ).datepicker({  maxDate: new Date() });
//  });



// ======================== Login function ============================

function login(){
  var user_name = document.getElementById("username").value
  var password = document.getElementById("password").value

  var login_data = [
    {
    "user_name":user_name,
    "password":password
    }
  ];

  alert(JSON.stringify(login_data))

  $.ajax({
    type: "POST",
    url: "/login_check",
    data: JSON.stringify(login_data),
    contentType: "application/json",
    dataType: 'json',
    // alert("asd")
    success: function(data) {
      console.log("Result:");
      console.log(data);
      // if (data.success){
      //   $("#crds").load(" #crds > *");
      // }
      // $('#coordinators').html($('#coordinators',data).html());
      // $('#coordinators').load("role/coordinator/coordinators.html # coordinators");

    } 
});

}


// ======================== End Login function ========================

// ====================== coordinator functions ====================

function addCoordinator() {

var firstName = document.getElementById("firstName").value
var lastName = document.getElementById("lastName").value
var gender = document.querySelector('input[name="gender"]:checked').value;
var age = document.getElementById("dob").value
var number = document.getElementById("phone").value
var email = document.getElementById("email").value
var username = document.getElementById("username").value
var password= document.getElementById('password').value
var confpwd = document.getElementById('confirmPass').value;
let regex = new RegExp('[a-z0-9]+@[a-z]+\.[a-z]{2,3}');
var male = document.getElementById("male");
var female = document.getElementById("female");
var others = document.getElementById("Others")


  if (firstName.length <1){
    document.getElementById("add-cord-fname").innerText = "Please enter valid details"
  }
  else{
    document.getElementById("add-cord-fname").innerText = ""
  }
  if (lastName.length <1){
    document.getElementById("add-cord-lname").innerText = "Please enter valid details"
  }
  else{
    document.getElementById("add-cord-lname").innerText = ""
  }
  if (age == ""){
    document.getElementById("add-cord-age").innerText = "Please enter valid details"
  }
  else{
    document.getElementById("add-cord-age").innerText = ""

  }
  if(regex.test(email))
    {
      document.getElementById("add-cord-email").innerText = ""
    }
    else{
      document.getElementById("add-cord-email").innerText = "Please enter a valid email Address !"
    }
  if (username.length <1){
    document.getElementById("add-cord-uname").innerText = "Please enter valid details"
  }
  else{
    document.getElementById("add-cord-uname").innerText = ""
  }
  if(number.length !==10){
    document.getElementById("add-cord-phno").innerText = "Please enter valid phone mumber !"
  }
  else{
    document.getElementById("add-cord-phno").innerText = ""
  }
  if(document.getElementById('male').checked == false &&  document.getElementById('female').checked == false && document.getElementById('other').checked)
  {
    document.getElementById("researcher-gender").innerText = "Please select a gender"
  }
  else {
    document.getElementById("researcher-gender").innerText = ""
  }

if(firstName.length > 1 && lastName.length > 1 && age !== "" && regex.test(email) && username.length > 1 && number.length ==10 && gender && password == confpwd) {

var server_data = [
    {"first_name": firstName,
    "last_name":lastName,
    "gender": gender,
    "age": age,
    "number": number,
    "email": email,
    "user_name":username,
    "password":password}
];

console.log(server_data)

    $.ajax({
        type: "POST",
        url: "/addcoordinator",
        data: JSON.stringify(server_data),
        contentType: "application/json",
        dataType: 'json',
        success: function(data) {
          console.log(data);
        } 
    });
    $('#addcoordinator').modal('hide');
    window.location.reload();
  }
}

function addCoordinatorcheckPwd(){
  var passwd = document.getElementById('password').value;
  var confpwd = document.getElementById('confirmPass').value;
  if (confpwd !== passwd){
    document.getElementById("add-cord-confpwd").innerText = "Passwords doesn't match"
  }
  else{
    document.getElementById("add-cord-confpwd").innerText = "Passwords matched"
  }

}

function editCoordinatorData() {
var cname = document.getElementById("coname").value
var first_name = document.getElementById("editcofirst_name").value
var last_name = document.getElementById("editcolast_name").value
var number = document.getElementById("editconumber").value
var email = document.getElementById("editcoemail").value
var age = document.getElementById("editcoage").value
var status = document.querySelector('input[name="editcostatus"]:checked').value
let regex = new RegExp('[a-z0-9]+@[a-z]+\.[a-z]{2,3}');
var gender = document.querySelector('input[name="gender"]:checked').value;

if (first_name.length <1){
  document.getElementById("edit-cord-fname").innerText = "Please enter valid detail"
}
else{
  document.getElementById("edit-cord-fname").innerText = ""
}
if (last_name.length <1){
  document.getElementById("edit-cord-lname").innerText = "Please enter valid detail"
}
else{
  document.getElementById("edit-cord-lname").innerText = ""
}
if (number.length !== 10){
  document.getElementById("edit-cord-phno").innerText = "Phone number should have 10 digits only"
}
else{
  document.getElementById("edit-cord-phno").innerText = ""
}
if (age == "" ){
  document.getElementById("edit-cord-age").innerText = "Please pick a date"
}
else{
  document.getElementById("edit-cord-age").innerText = ""
}
if(regex.test(email))
{
  document.getElementById("edit-cord-email").innerText = ""
}
else{
  document.getElementById("edit-cord-email").innerText = "Please enter a valid email Address !"
}

if(first_name.length >1 && last_name.length > 0 && number.length == 10 && age !== "" && regex.test(email) && gender ){
alert("all data recieved")
var editCo_data = [
    {
    "first_name": first_name,
    "last_name": last_name,
    "number": number,
    "age":age,
    "email": email,
    "gender": gender,
    "active":status
    }
];
    $.ajax({
        type: "PUT",
        url: "/editcoordinator/"+cname,
        data: JSON.stringify(editCo_data),
        contentType: "application/json",
        dataType: 'json',
        success: function(result) {
          console.log("Result:");
          console.log(result);
          window.location.reload();

        } 
    });
  }
}

// ====================== End coordinator functions ====================



// ====================== researcher functions ====================

function addResearcher() {
var firstName = document.getElementById("firstName").value;
var lastName = document.getElementById("lastName").value;
// var fullName = firstName +" "+ lastName
var gender = document.querySelector('input[name="gender"]:checked').value;
var age = document.getElementById("dob").value ;
var number = document.getElementById("number").value;
var email = document.getElementById("email").value;
var username = document.getElementById("username").value;
var password= document.getElementById('password').value;
var confpwd = document.getElementById('confirm').value;
let regex = new RegExp('[a-z0-9]+@[a-z]+\.[a-z]{2,3}');
var male = document.getElementById("male");
var female = document.getElementById("female");
var others = document.getElementById("Others")

  if(document.getElementById('male').checked == false &&  document.getElementById('female').checked == false && document.getElementById('other').checked)
  {
    document.getElementById("researcher-gender").innerText = "Please select a gender"
  }
  else {
    document.getElementById("researcher-gender").innerText = ""
  }
  if (firstName.length < 1){
    document.getElementById("resercher-first-name").innerText = "Please enter valid data !"
  }
  else{
    document.getElementById("resercher-first-name").innerText = ""
  }
  if (lastName.length < 1){
    document.getElementById("resercher-last-name").innerText = "Please enter valid data !"
  }
  else{
    document.getElementById("resercher-last-name").innerText = ""
  }
  if (number.length !== 10){
    document.getElementById("resercher-phnumber").innerText = "Please enter valid phone mumber !"
  }
  else{
    document.getElementById("resercher-phnumber").innerText = ""
  }
  if(regex.test(email))
  {
    document.getElementById("resercher-email").innerText = ""
  }
  else{
    document.getElementById("resercher-email").innerText = "Please enter a valid email Address !"
  }
  if (username.length < 1){
    document.getElementById("resercher-username").innerText = "Please enter valid data !"
  }
  else{
    document.getElementById("resercher-username").innerText = ""
  }
  if(age ==""){
    document.getElementById("researcher-dob").innerText = "Please select DOB"
  }
  else{
    document.getElementById("researcher-dob").innerText = ""
  }

  if (username.length > 1 & regex.test(email) & number.length == 10 & lastName.length > 1 & firstName.length > 1 && password == confpwd && gender){
    var researcher_data = [
      {"first_name": firstName,
      "last_name":lastName,
      "gender": gender,
      "age": age,
      "number": number,
      "email": email,
      "user_name":username,
      "password":password}
  ];

      $.ajax({
          type: "POST",
          url: "/addresearcher",
          data: JSON.stringify(researcher_data),
          contentType: "application/json",
          dataType: 'json',
          // alert("asd")
          success: function(data) {
            console.log(data);
          } 
      });
      $('#addreseacher').modal('hide');
      window.location.reload();
      window.location.reload();
  // })
  }
  else{
    alert("Please check the fields")
  }
}

function addresearcherPassCheck(){
  var passwd = document.getElementById('password').value;
  var confpwd = document.getElementById('confirm').value;
  if (confpwd !== passwd){
    document.getElementById("researcher-conf-pwd").innerText = "Passwords doesn't match"
  }
}


function editResearcherData() {
var rname = document.getElementById("rename").value
// alert(rname)
// var gender = document.getElementById("editcogender").value

var first_name = document.getElementById("editrefirst_name").value
var last_name = document.getElementById("editrelast_name").value
var number = document.getElementById("editrenumber").value
var email = document.getElementById("editreemail").value
var age = document.getElementById("editreage").value
var status = document.querySelector('input[name="editrestatus"]:checked').value
let regex = new RegExp('[a-z0-9]+@[a-z]+\.[a-z]{2,3}');
var gender = document.querySelector('input[name="gender"]:checked').value;

  if (first_name.length < 1){
    document.getElementById("edit-res-fname").innerText = "Please enter valid data !"
  }
  else{
    document.getElementById("edit-res-fname").innerText = ""
  }
  if (last_name.length < 1){
    document.getElementById("edit-res-lname").innerText = "Please enter valid data !"
  }
  else{
    document.getElementById("edit-res-lname").innerText = ""
  }
  if (number.length == 10){
    document.getElementById("edit-res-phnumber").innerText = ""
  }
  else{
    document.getElementById("edit-res-phnumber").innerText = "Please enter valid phone mumber !"
  }
  if(regex.test(email))
  {
    document.getElementById("edit-res-email").innerText = ""
  }
  else{
    document.getElementById("edit-res-email").innerText = "Please enter a valid email Address !"
  }
  if(document.getElementById('male').checked == false &&  document.getElementById('female').checked == false && document.getElementById('other').checked)
  {
    document.getElementById("researcher-gender").innerText = "Please select a gender"
  }
  if(age ==""){
    document.getElementById("edit-res-age").innerText = "Please select DOB"
  }
  else{
    document.getElementById("edit-res-age").innerText = ""
  }

  if(first_name.length > 1 && last_name.length > 1 && number.length == 10 && regex.test(email) && gender && age !== ""){
var editRe_data = [
    {
    "first_name": first_name,
    "last_name": last_name,
    "number": number,
    "age":age,
    "email": email,
    "gender": gender,
    "active":status
    }
];
    $.ajax({
        type: "PUT",
        url: "/editresearcher/"+rname,
        data: JSON.stringify(editRe_data),
        contentType: "application/json",
        dataType: 'json',
        success: function(result) {
          console.log(result);
          window.location.reload();
        //   $('#coordinators').load(location.href +  ' #coordinators');
        // $('#coordinators').load(location.href +  ' #coordinators');

        } 
    });
  }
}


// ====================== End researcher functions ====================




// ====================== Studyinvestigator functionalities ====================

function addInvestigator() {

var firstName = document.getElementById("firstName").value
var lastName = document.getElementById("lastName").value
var fullName = firstName +" "+ lastName
var gender = document.querySelector('input[name="gender"]:checked').value;
var age = document.getElementById("dob").value 
var number = document.getElementById("number").value
var email = document.getElementById("email").value
var username = document.getElementById("username").value
var password= document.getElementById('password').value
var confpwd = document.getElementById("confirm").value
let regex = new RegExp('[a-z0-9]+@[a-z]+\.[a-z]{2,}');

if (firstName.length <1 || firstName.length >24){
  document.getElementById("investigator-fname").innerText = "Only 1-24 characters are allowed"
}
else{
  document.getElementById("investigator-fname").innerText = ""
}
if (lastName.length <1){
  document.getElementById("investigator-lname").innerText = "Please enter valid data"
}
else{
  document.getElementById("investigator-lname").innerText = ""
}
if(number.length != 10){
  document.getElementById("investigator-phno").innerText = "Phone number should have only 10 characters"
}
else{
  document.getElementById("investigator-phno").innerText = ""
}
if(username.length < 1){
  document.getElementById("investigator-username").innerText = "Please enter valid data"
}
else{
  document.getElementById("investigator-username").innerText = ""
}
if(regex.test(email)){
  document.getElementById("investigator-email").innerText = ""
}
else{
  document.getElementById("investigator-email").innerText = "Please enter valid email"
}
if(age ==""){
  document.getElementById("investigator-dob").innerText = "Please select DOB"
}
else{
  document.getElementById("investigator-dob").innerText = ""
}
if(firstName.length <24 && lastName.length >1 && number.length == 10 && username.length > 1 && password == confpwd && regex.test(email) && gender){

var investigator_data = [
    {"first_name": firstName,
    "last_name":lastName,
    "gender": gender,
    "age": age,
    "number": number,
    "email": email,
    "user_name":username,
    "password":password}
];
    $.ajax({
        type: "POST",
        url: "/Addstudyinvestigator",
        data: JSON.stringify(investigator_data),
        contentType: "application/json",
        dataType: 'json',
        success: function(data) {
          console.log("Result:");
          console.log(data);
          $('#addInvestigator').modal('hide');
          window.location.reload();
        //   $('#coordinators').html($('#coordinators',data).html());
            // $('#coordinators').load("role/coordinator/coordinators.html # coordinators");

        } 
    });
  }
    // e.preventDefault()
// })
}
function investigatorpwdcheck(){
  var password= document.getElementById('password').value
  var confpwd = document.getElementById("confirm").value
  if (confpwd !== password){
    document.getElementById("investigator-confpwd").innerText = "Passwords doesn't match"
  }
  else{
    document.getElementById("investigator-confpwd").innerText = ""
  }
}



function editInvestigatorData() {
var iname = document.getElementById("inname").value
// alert(iname)
// var gender = document.getElementById("editcogender").value

var first_name = document.getElementById("editinfirst_name").value
var last_name = document.getElementById("editinlast_name").value
var number = document.getElementById("editinnumber").value
var email = document.getElementById("editinemail").value
var age = document.getElementById("editinage").value
var status = document.querySelector('input[name="editinstatus"]:checked').value
let regex = new RegExp('[a-z0-9]+@[a-z]+\.[a-z]{2,3}');
var gender = document.querySelector('input[name="gender"]:checked').value;

if (first_name.length  < 1){
  document.getElementById("investigator-fname").innerText = "Please enter valid data"
}
else{
  document.getElementById("investigator-fname").innerText = ""
}
if(last_name.length < 1){
  document.getElementById("investigator-lname").innerText = "Please enter valid data"
}
else{
  document.getElementById("investigator-lname").innerText = ""
}
if(number.length !==10){
  document.getElementById("investigator-phno").innerText = "Only 10 digits accepted"
}
else{
  document.getElementById("investigator-phno").innerText = ""
}
if(regex.test(email)){
  document.getElementById("investigator-email").innerText = ""
}
else{
  document.getElementById("investigator-email").innerText = "Please enter valid email address"
}
if(age !==""){
  document.getElementById("investigator-dob").innerText = ""
}
else{
  document.getElementById("investigator-dob").innerText = "Please pick a date"
}
if(first_name.length  > 1 && last_name.length > 1 && number.length == 10 && regex.test(email) && age !=="" ){
var editIn_data = [
    {
    "first_name": first_name,
    "last_name": last_name,
    "number": number,
    "age":age,
    "email": email,
    "gender": gender,
    "active":status
    }
];

    $.ajax({
        type: "PUT",
        url: "/Editstudyinvestigator/"+iname,
        data: JSON.stringify(editIn_data),
        contentType: "application/json",
        dataType: 'json',
        success: function(result) {
          console.log("Result:");
          console.log(result);
          window.location.reload();
        //   $('#coordinators').load(location.href +  ' #coordinators');
        // $('#coordinators').load(location.href +  ' #coordinators');

        } 
    });
  }
}

// ====================== End Studyinvestigator functionalities ====================



// ======================  Location functionalities ====================


function addLocation() {
  var panchayat = document.getElementById("panchayat").value
  var village = document.getElementById("village").value
  var shg = document.getElementById("shg").value
  // var arm = document.querySelector('input[name="locationarm"]:checked').value;
  var locCo = document.getElementById("locCoordinator").value
  var locRe = document.getElementById("locResearcher").value

  var location_data = [
    {
      "panchayat": panchayat,
      "village": village,
      "shg": shg,
      "coordinator": locCo,
      "researcher": locRe,
    }
  ];

  $.ajax({
    type: "POST",
    url: "/Addlocation",
    data: JSON.stringify(location_data),
    contentType: "application/json",
    dataType: 'json',
    success: function (data) {
      console.log(data);
    }
  });
  $('#addLocation').modal('hide');

}

// ====================== End location functionalities ====================


function enableEditList(name) {
  var btnId = name
  // alert(name)
  var a = document.getElementById("editB" + name).getAttribute('value');
  var x = document.getElementById("side_edit" + name);
  var y = document.getElementById("full_edit" + name);
  var z = document.getElementById("loc-edit-dis" + name);
  // alert(a)
  if (name == a) {
    // alert("aaa")
    if (x.style.display === "block") {
      x.style.display = "none";
      y.style.display = "block";
      z.style.display = "none";
    } else {
      x.style.display = "block";
      y.style.display = "none";
      z.style.display = "block"
    }
  }
  else if (name != a) {
    x.style.display = "none";
    y.style.display = "none";
    z.style.display = "none";
  }
}

function addcoordinatorCloseModal() {
  $('#addcoordinator').modal('hide');
}

function addResearcherCloseModal() {
  $('#addresearcher').modal('hide');
}

function addInvestigatorCloseModal() {
  $('#addInvestigator').modal('hide');
}


// ============== Start Survey functions=====================


function addSurvey() {

  const cycleElements = Array.from(document.getElementsByClassName("cycles"))
  const filledbyElements = Array.from(document.getElementsByClassName("filledBy"))
  const daysElements = Array.from(document.getElementsByClassName("days"))
  const plusElements = Array.from(document.getElementsByClassName("plus"))
  const minusElements = Array.from(document.getElementsByClassName("minus"))
  const groupElements = Array.from(document.getElementsByClassName("group"))


  console.log(cycleElements);
  var sur_name = []
  var cycleData = []
  var filledData = []
  var daysData = []
  var plusData = []
  var minusData = []
  var groupData = []

  for (var i = 0; i < cycleElements.length; i++) {
      console.log(cycleElements[i].value)
      cycleData.push(cycleElements[i].value)
  }

  for (var i = 0; i < filledbyElements.length; i++) {
    console.log(filledbyElements[i].value)
    filledData.push(filledbyElements[i].value)
  }

  for (var i = 0; i < daysElements.length; i++) {
      console.log(daysElements[i].value)
      daysData.push(daysElements[i].value)
  }
  // sur_name
  for (var i = 0; i < plusElements.length; i++) {
    console.log(plusElements[i].value)
    plusData.push(plusElements[i].value)
  }

  for (var i = 0; i < minusElements.length; i++) {
    console.log(minusElements[i].value)
    minusData.push(minusElements[i].value)
  }

  for (var i = 0; i < groupElements.length; i++) {
    console.log(groupElements[i].value)
    groupData.push(groupElements[i].value)
  }

  sur_name = document.getElementById("sur_name").value

  var survey_data = [{
    "survey_name": sur_name,
    "cycles": cycleData,
    "filled_by": filledData,
    "days": daysData,
    "plus": plusData,
    "minus": minusData,
    "group": groupData
  }]

  alert(JSON.stringify(survey_data))

  $.ajax({
    type: "POST",
    url: "/Addsurvey",
    data: JSON.stringify(survey_data),
    contentType: "application/json",
    dataType: 'json',
    success: function (data) {
      console.log("Result:");
      console.log(data);
    }
  });

}

function UpdateQuestion(){
  // alert(name)
  var question_id = document.getElementById("question_id").value
  var q_num = document.getElementById("question-number").value
  var eng_ques = document.getElementById("english-question").value
  var branch = document.getElementById("question-branch").value
  var kan_ques = document.getElementById("kannada-question").value
  var section = document.getElementById("question-section").value
  var question_sectionName = document.getElementById("question-sectionName").value
  var type = document.querySelector('input[name="type"]:checked').value;

  var eng_opt = []
  const engQuesElements = Array.from(document.getElementsByClassName("ques_e"))

  for (var i = 0; i < engQuesElements.length; i++) {
    console.log(engQuesElements[i].value)
    eng_opt.push(engQuesElements[i].value)
  }

  var kan_opt = []
  const kanQuesElements = Array.from(document.getElementsByClassName("ques_k"))

  for (var i = 0; i < kanQuesElements.length; i++) {
    console.log(kanQuesElements[i].value)
    kan_opt.push(kanQuesElements[i].value)
  }

  var weitage = []
  const weitageElements = Array.from(document.getElementsByClassName("w_e"))

  for (var i = 0; i < weitageElements.length; i++) {
    console.log(weitageElements[i].value)
    weitage.push(weitageElements[i].value)
  }

  var sub_branch = []
  const sub_branchElements = Array.from(document.getElementsByClassName("ob_e"))

  for (var i = 0; i < sub_branchElements.length; i++) {
    console.log(sub_branchElements[i].value)
    sub_branch.push(sub_branchElements[i].value)
  }

  var status = document.querySelector('input[name="ques_status"]:checked').value;

  var udatedQuestionData = [{
    "q_num": q_num,
    "eng_ques": eng_ques,
    "branch": branch,
    "kan_ques": kan_ques,
    "section":section,
    "question_sectionName":question_sectionName,
    "type":type,
    "eng_opt": eng_opt,
    "kan_opt":kan_opt,
    "weitage":weitage,
    "sub_branch": sub_branch,
    "active":status
  }]

  // alert(eng_opt)
  alert(JSON.stringify(udatedQuestionData))

  
  $.ajax({
    type: "PUT",
    url: "/editquestion/"+question_id ,
    data: JSON.stringify(udatedQuestionData),
    contentType: "application/json",
    dataType: 'json',
    // alert("asd")
    success: function (data) {
      console.log("Result:");
      console.log(data);

    }
  });


}

function editSurveyModal(name) {
  $.ajax({
    type: "GET",
    url: "/survey/" + name,
    success: function (result) {
      console.log(result)
      document.getElementById("surveyName").value = result.survey_name;
      document.getElementById("filledBy").value = result.filled_by;
      document.getElementById("days").value = result.days;
      document.getElementById("plus").value = result.plusdays;
      document.getElementById("minus").value = result.minusdays;
      document.getElementById("editgroup").value = result.group1;
      document.getElementById("updatesurveybutton").value = result.sur_ins_id;
      if (result.active == 'yes') {
        document.getElementById("editSurveyActive").checked = true;
      }
      else {
        document.getElementById("statusDisabled").checked = true;
      }
    }
  });
}

function updateSurvey() {
  var survey_name = document.getElementById("surveyName").value;
  var filled_by = document.getElementById("filledBy").value;
  var survey_days = document.getElementById("days").value;
  var survey_plus = document.getElementById("plus").value;
  var survey_minus = document.getElementById("minus").value;
  var survey_group = document.getElementById("editgroup").value;
  var status = document.querySelector('input[name="editSurveyStatus"]:checked').value;
  var id = document.getElementById("updatesurveybutton").value;

  alert(id)

  var server_data = [{
    "survey_name" : survey_name,
    "filled_by" : filled_by,
    "days" : survey_days,
    "plusdays" : survey_plus,
    "minusdays" : survey_minus,
    "group1" : survey_group,
    "active" : status

  }];
  $.ajax({
    type: "PUT",
    url: "/editsurvey/" + id,
    data: JSON.stringify(server_data),
    contentType: "application/json",
    dataType: 'json',
    // alert("asd")
    success: function (data) {
      console.log("Result:");
      console.log(data);

    }
  });
  $("#editSurvey").modal('hide');
}


// ============== End Survey functions=====================



// ========== Start Question functionalities ===============


function AddQuestion() {
var audioform_display = document.getElementById("form_audio_upload")

var english_question = document.getElementById("english-question").value;
// alert(english_question)

var kannada_question = document.getElementById("kannada-question").value;
var question_number = document.getElementById("question-number").value;
var question_branch = document.getElementById("question-branch").value;
var question_section = document.getElementById("question-section").value;
var question_sectionName = document.getElementById("question-sectionName").value;
var type = document.querySelector('input[name="type"]:checked').value;

const engQuesElements = Array.from(document.getElementsByClassName("ques_e"))
const kanQuesElements = Array.from(document.getElementsByClassName("ques_k"))

const w_eElements = Array.from(document.getElementsByClassName("w_e"))
const k_eElements = Array.from(document.getElementsByClassName("w_k"))

const ob_eElements = Array.from(document.getElementsByClassName("ob_e"))
const ob_kElements = Array.from(document.getElementsByClassName("ob_k"))



var quesEnData = []
var quesKaData = []

var w_eData = []
var w_kData = []

var ob_eData = []
var ob_kData = []


for(var i = 0; i < engQuesElements.length; i++) {
    console.log(engQuesElements[i].value)
    quesEnData.push(engQuesElements[i].value)
}

for(var i = 0; i < kanQuesElements.length; i++) {
  console.log(kanQuesElements[i].value)
  quesKaData.push(kanQuesElements[i].value) 
} 

for(var i = 0; i < w_eElements.length; i++) {
  console.log(w_eElements[i].value)
  w_eData.push(w_eElements[i].value)
}

for(var i = 0; i < k_eElements.length; i++) {
  console.log(k_eElements[i].value)
  w_kData.push(k_eElements[i].value)
}

for(var i = 0; i < ob_eElements.length; i++) {
  console.log(ob_eElements[i].value)
  ob_eData.push(ob_eElements[i].value)
}

for(var i = 0; i < ob_kElements.length; i++) {
  console.log(ob_kElements[i].value)
  ob_kData.push(ob_kElements[i].value)
}
// var status = document.querySelector('input[name="ques_status"]:checked').value;

// alert(status)

var questionData = [{
  "survey_id": "SUR0005",
  "que_number":question_number,
  "que_e": english_question,
  "que_k": kannada_question,
  "que_branch": question_branch,
  "section": question_section,
  "section_name": question_sectionName,
  "opttype":type,
  "opt":"opt",
  "opt_e":quesEnData,
  "opt_k":quesKaData,
  "opt_sb":ob_eData,
  "opt_w":w_eData
}]

// alert(JSON.stringify(questionData))


$.ajax({
  type: "POST",
  url: "/Addquestion",
  data: JSON.stringify(questionData),
  contentType: "application/json",
  dataType: 'json',
  // alert("asd")
  success: function(data) {
    console.log("Result:");
    console.log(data[0]);
    if(data[0] == "success"){
      // alert(audioform_display.style.display )
        // audioform_display.style.display = "block"
        audioform_display.style.display = "block";
        document.getElementById("ques_audioid").value = data[1]
        document.getElementById("survey_audioid").value = data[2]

    }
    else{
      audioform_display.style.display = "none"
    }
  } 
});
}

// ========== End Question functionalities ===============

function editSurveyQuestion(){

  var sur_ques_id = document.getElementById("").value
  alert("editSurveyQuestion")

  $.ajax({
    type: "GET",
    url: "/Addquestion/"+sur_ques_id,
    success: function(data) {
      console.log("Result:");
      console.log(data);
  
    } 
  });

}

function editSurQuestion(name){
  alert(name)
  $.ajax({
    type: "GET",
    url: "/editquestion//"+name,
    success: function(data) {
      console.log("Result:");
      console.log(data);
  
    } 
  });
  
}

// ========== End Question functionalities ===============

function editModuleMapping(name){


    var PkId = document.getElementById("updModule").value 
    $.ajax({
      type: "GET",
      url: "/Modulemapping/"+name,
      contentType: "application/json",
      dataType: 'json',
      success: function(result) {
        console.log(result)

          document.getElementById("test").innerText = result.survey_name;
          
          document.getElementById("edit_survey_description").value = result.description;
          document.getElementById("edit_score_min").value = result.min_score;
          document.getElementById("edit_score_max").value = result.max_score;
          // document.getElementById("edit_instance").value = result.survey_instance_days;
          // document.getElementById("edit_week").value = result.week_no;
          document.getElementById("edit-week-interval").value = result.interval1;
          document.getElementById("edit-week").innerText = "Week "+result.week_no;
          // document.getElementById("edit-instance").innerText = result.survey_instance_days;

          document.getElementById("test").value = result.survey_pri_id;
          // alert(result.module_no)
          document.getElementById("sss").innerText = result.module_no;

          document.getElementById("submodules").innerText = result.module_no;
          document.getElementById("submodules").value = result.module_no;

          document.getElementById("zzz").innerText = result.survey_instance_days;
          // document.getElementById("subinstance").innerText = result.survey_instance_days;
          // document.getElementById("subinstance").value = result.survey_instance_days;


          if (result.active == 'yes')
          {
            document.getElementById("statusActive").checked = true;
          }
          else
          {
              document.getElementById("statusInactive").checked = true;
          }


// active: "yes"
// description: "Level 1"
// interval1: "0"
// max_score: "5"
// min_score: "0"
// module_no: "[1a1,1a2]"
// name: "MOD_MAP_1"
// survey_instance_days: "[0,180]"
// survey_name: "SUS2"
// survey_pri_id: "SUR0002"
// week_no: "1"

      }
    });
}



function updateModuleMapping(){
  var PkId = document.getElementById("updModule").value 
  // var edited_survey_name = document.getElementById("edit_survey_name").value
  // var edited_description = document.getElementById("edit_survey_description").value
  // var edited_min_score = document.getElementById("edit_score_min").value
  // var edited_max_score = document.getElementById("edit_score_max").value
  // var edited_instance = document.getElementById("edit_instance").value
  // var edited_week = document.getElementById("edit_week").value
  // var edited_week_interval = document.getElementById("edit-week-interval").value
  // var edited_status = document.querySelector('input[name="updatedMappingStatus"]:checked').value;
  alert(PkId)
  // var server_data = [{
  //   "survey_name" : edited_survey_name,
  //   "description" : edited_description,
  //   "min_score" : edited_min_score,
  //   "max_score" : edited_max_score,
  //   "survey_instance_days" : edited_instance,
  //   "week_no" : edited_week,
  //   "interval1" : edited_week_interval,
  //   "active" : edited_status
  // }];
//   $.ajax({
//     type: "POST",
//     url: "/editlocation/"+name,
//     data: JSON.stringify(server_data),
//     contentType: "application/json",
//     dataType: 'json',
//     success: function(data) {
//       console.log(data);
//       $("#locationList").load(document.url+" #locationList");
//     } 
// });
// $('#addLocation').modal('hide');


}

function UpdateQuestion(){
  alert("iiugkj")
  
  var num_of_options = document.getElementById("no_option").value
  alert(num_of_options)
  // var 

  for (var i=0;i<num_of_options;i++){
    var a  = document.getElementById("i").value
    // alert(i)
  }



  alert(a)
  alert(b)
  alert(c)
  console.log(a)
  console.log(b)


}
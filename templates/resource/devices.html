{% extends 'partial/m_base.html' %}

{% block title %} Devices {% endblock %}

{% block content %} 

    <!-- Content -->
    <div class="container mt-5" style="min-height: 85vh">
        <div class="card">
            <div class="">
                <div class="col-lg-12">
                    <div class="card-body text-center ">
                        <div class="row ">
                            <div class="d-flex justify-content-center align-items-center align-self-center">
                                <div class="col-3 "><p class="card__text__head m-0">Device Name</p></div>
                                <div class="col-3"><p class="card__text__head m-0">Mac Address</p></div>
                                <div class="col-3"><p class="card__text__head m-0">Status</p></div>
                                <div class="col-3"><p class="card__text__head m-0">Action</p></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {% for response in responses %}
        <!-- <a href="/coordinator/{{ response.user_name }}"> -->
            <div class="card mt-4" id="devicelist">
                <div class="">
                    <div class="col-lg-12">
                        <!-- For loop logic of jinja template -->
                        <!-- table rows  -->

                            <div class="card-body text-center ">
                                <div class="row">  
                                    <div class="d-flex justify-content-center align-items-center ">
                                        <div class="col-3 d-none"><input type="text" class="" id="deviceid" value={{response.name}}></div>
                                        <div class="col-3"><p class="card__text__body m-0">{{response.device_name}}</p></div>
                                        <div class="col-3"><p class="card__text__body m-0">{{ response.imei }}</p></div>
                                        <div class="col-3"><p class="card__text__body m-0">{{ response.active }}</p></div>
                                        <div class="col-3">
                                            <button type="submit" id="editButton" class="btn btn-primary" name={{response.name}}  onclick="editDeviceId(name);" data-bs-toggle="modal" data-bs-target="#editDevice" style="cursor: pointer;">Edit</button>
                                            <button type="submit" id="editButton" class="btn btn-primary" name={{response.name}}  onclick="deleteDevice(name);" style="cursor: pointer;">Delete</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        
                    </div>
                </div>
            </div>
        <!-- </a> -->
        {% endfor %}


        <div class="coodinator__add">
            <!-- <button type="button" class="coodinator__add__button" data-bs-toggle="modal" data-bs-target="#exampleModal"> -->
                <img src="{{ url_for('static', filename='mithraf/images/Add button.png')}}" data-bs-toggle="modal" data-bs-target="#exampleModal" style="cursor: pointer;" />
            <!-- </button> -->
        </div>


        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                    <div class="modal-header">
                    <h4 class="modal-title" id="exampleModalLabel">Add New Device</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                        <div class="modal-body">
                        <form id="addDevice">
            
                            <div class="form-outline mb-4">
                            <label class="form-label" for="form2Example11">Device Name</label>
                            <input type="text" id="deviceName" class="form-control"
                                placeholder="Device Name" />
                            </div>
            
                            <div class="form-outline mb-4">
                                <label class="form-label" for="form2Example11">Mac Address</label>
                                <input type="text" id="mac" class="form-control"
                                    placeholder="Mac Address" />
                            </div>

                            <div class="text-center pt-1 mb-2 pb-1">
                            <button class="btn btn-primary btn-block fa-lg gradient-custom-2 mb-3" type="submit" onclick="addDevice(); closeModal();">Submit</button>
                            </a>
                            </div>  
                        </form>                     
                        </div>
            </div>
            </div>
        </div>
        <!-- Modal END-->


        <div class="coodinator__add">
            <!-- <button type="button" class="coodinator__add__button" data-bs-toggle="modal" data-bs-target="#exampleModal"> -->
                <img src="{{ url_for('static', filename='mithraf/images/Add button.png')}}" data-bs-toggle="modal" data-bs-target="#exampleModal" style="cursor: pointer;" />
            <!-- </button> -->
        </div>


        <!-- Modal -->
        <div class="modal fade" id="editDevice" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                    <div class="modal-header">
                    <h4 class="modal-title" id="exampleModalLabel">Add New Device</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                        <div class="modal-body">
                        <form id="addDevice">
                            
                            <div class="form-outline mb-4">
                            <label class="form-label" for="form2Example11">Device Name</label>
                            <input type="text" id="editdeviceName" class="form-control" value=""
                                placeholder="Device Name" />
                            </div>
            
                            <div class="form-outline mb-4">
                                <label class="form-label" for="form2Example11">Mac Address</label>
                                <input type="text" id="editmac" class="form-control" value=""
                                    placeholder="Mac Address" />
                            </div>

                            <div class="text-center pt-1 mb-2 pb-1">
                            <button class="btn btn-primary btn-block fa-lg gradient-custom-2 mb-3" type="submit" onclick="editDevice(); closeModal();">Submit</button>
                            </a>
                            </div>  
                        </form>                     
                        </div>
            </div>
            </div>
        </div>
        <!-- Modal END-->

    </div> 
    <!-- Content END-->


{% endblock %}